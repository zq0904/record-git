<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>anime</title>
  <style>
    /* 转盘 部分 */
    .prize {
      position: absolute;
      top: 0;
      left: 0;
      width: 1200px;
      height: 700px;
      background: url(./images/prize-behind.png) no-repeat 0 0 / contain;
    }
    /* 底板 */
    .lamp-1, .lamp-2 {
      position: absolute;
      top: 78px;
      left: 664px;
      width: 437px;
      height: 437px;
      background: url(./images/lamp-1.png) no-repeat 0 0 / contain;
    }
    .lamp-2 {
      background-image: url(./images/lamp-2.png);
    }
    /* 核心转盘 */
    .prize-core {
      position: absolute;
      top: 132px;
      left: 717px;
      width: 334px;
      height: 334px;
      background: #fff url(./images/prize-core.png) no-repeat 0 0 / contain;
      border-radius: 50%;
    }
    /* 顶板 */
    .prize-keep {
      position: absolute;
      top: 0;
      left: 0;
      width: 1200px;
      height: 700px;
      background: url(./images/prize-keep.png) no-repeat 0 0 / contain;
    }
    /* 立即抽奖按钮 */
    .draw-button {
      position: absolute;
      top: 223px;
      left: 831px;
      width: 103px;
      height: 133px;
      background: url(./images/draw-button.png) no-repeat 0 0 / contain;
      color: transparent;
    }
  </style>
</head>
<body>
  <div class="prize">
    <div class="lamp-1"></div>
    <div class="lamp-2"></div>
    <div class="prize-core"></div>
    <div class="prize-keep"></div>
    <a class="draw-button" href="javascript:;">立即抽奖</a>
  </div>
  <script src="../node_modules/animejs/lib/anime.min.js"></script>
  <script src="../node_modules/zero-core/umd/index.js"></script>
  <script>
    // JavaScript动画引擎 https://github.com/juliangarnier/anime
    const arr = [
      { text: '10金币' },
      { text: '急速联系卡' },
      { text: '下载提升劵' },
      { text: '5折简历劵' },
      { text: '5金币' },
      { text: '普通简历劵' },
      { text: '应聘邀请卡' },
      { text: '金领简历劵' },
    ]
    // 彩灯闪烁
    anime({
      targets: '.lamp-2',
      loop: true,
      opacity: 0,
      easing: 'steps(1)',
    });
    
    // 点击按钮开始 旋转
    let isRotate = false
    const btn = document.querySelector('.draw-button')
    const handleClick = () => {
      // 模拟中奖
      const randomNum = Zero.Number.random(1, 8)
      console.log('当前抽中的是', arr[randomNum - 1].text, randomNum)
      const rotateEnd = 360 * 5 + 360 / arr.length * (randomNum - .5)
      // + Zero.Number.random(-10, 10)
      anime({
        targets: '.prize-core',
        autoplay: true,
        duration: 5000,
        easing: 'easeOutCubic',
        rotate: [0, `${rotateEnd}deg`],
        complete() {
          console.log('complete')
        }
      })
    }

    btn.addEventListener('click', handleClick)
    
    
  </script>
</body>
</html>