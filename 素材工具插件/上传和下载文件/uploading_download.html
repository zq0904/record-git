<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>上传和下载</title>
</head>

<body>
  <form id="form1">
    <input type="text" name="number">
    <input type="file" name="file">
    <button>复合表单提交</button>
  </form>
  <br>
  <button id="download">下载文件</button>
  <script src="./node_modules/jquery/dist/jquery.min.js"></script>
  <script>
    // 复合表单提交
    $('#form1').on('submit', function(e) {
      e.preventDefault()

      var formData = new FormData(this)
      $.ajax({
        url: 'http://192.168.199.142:8080/api/attach/upload',
        data: formData,
        type: 'POST',
        dataType: 'JSON',
        mimeType: 'multipart/form-data',
        cache: false, // 不缓存
        processData: false, // JQ不去处理发送的数据
        contentType: false, // JQ不去设置请求头
        success: function(response) {},
        error: function(err) {}
      })
    })

    // 下载
    document.getElementById('download').onclick = function () {
      var url = 'https://codeload.github.com/douban/douban-client/legacy.zip/master'
      var form = document.createElement('form')
      form.action = url
      form.method = 'get'
      form.style.display = 'none'
      document.getElementsByTagName('body')[0].appendChild(form)
      form.submit() // 提交表单
    }

  </script>
</body>

</html>
