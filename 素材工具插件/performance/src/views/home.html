<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>performance</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="app">
    <ul v-if="list.length">
      <li v-for="({ name, url }, i) of list">
        <p>{{ name }}</p>
        <img :src="url" alt="mv" height="200" />
      </li>
    </ul>
    <img width="100%" src="https://s1.ax1x.com/2020/08/04/aDRO6H.jpg" alt="tp" />
  </div>
  <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.min.js"></script>
  <script>
    console.time('test')
  </script>
  <script src="/test.js"></script>
  <script>
    console.timeLog('test')
    new Vue({
      el: '#app',
      data: {
        list: []
      },
      async created() {
        const { code, data } = await fetch('/list').then(res => res.json())
        this.list = data
        console.log(this.list)
      },
      methods: {
        a: () => {
          console.log('a')
        }
      }
    })
    // 测试性能api相关

    // const { timing } = window.performance

    // const performances = {
    //   // pageloadtime页面加载耗时
    //   plt: timing.loadEventStart - timing.navigationStart,
    //   // 域名解析的耗时
    //   dns: timing.domainLookupEnd - timing.domainLookupStart,
    //   // TCP的耗时
    //   tcp: timing.connectEnd - timing.connectStart,
    //   // 读取页面第一个字节之前的耗时
    //   ttfb: timing.responseStart - timing.navigationStart,
    //   // 从发出请求到收到全部字节的时间
    //   rqt: timing.responseEnd - timing.requestStart,
    //   // dom interpret time: dom解析时间，不包括资源，到DOMContentLoaded为止
    //   dit: timing.domInteractive - timing.domLoading,
    //   // dom加载时间，包括所有资源
    //   dlt: timing.domComplete - timing.domLoading,
    // }
    console.time('test')
    setTimeout(() => {
      console.timeLog('test')
    }, 1000)
    setTimeout(() => {
      console.timeLog('test')
    }, 1000)
    const { timing } = window.performance
    console.log('pageloadtime页面加载耗时', timing.loadEventStart - timing.navigationStart)
    console.log('域名解析的耗时', timing.domainLookupEnd - timing.domainLookupStart)
    console.log('TCP的耗时', timing.connectEnd - timing.connectStart)
    console.log('读取页面第一个字节之前的耗时', timing.responseStart - timing.navigationStart)
    console.log('从发出请求到收到全部字节的时间', timing.responseEnd - timing.requestStart)
    console.log('dom interpret time: dom解析时间，不包括资源，到DOMContentLoaded为止', timing.domInteractive - timing.domLoading)
    console.log('dom加载时间，包括所有资源', timing.domComplete - timing.domLoading)

  </script>
</body>
</html>